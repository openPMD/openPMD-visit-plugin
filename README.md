openPMD plugin for VisIt
================================================================================

:warning: This reader plugin [has been integrated into mainline VisIt](https://github.com/visit-dav/visit/pull/3996) :tada:
All further development happens [in the VisIt repository](https://github.com/visit-dav/visit/pulls?q=is%3Apr+openPMD).

#### Table of Contents
1. [Presentation](#Presentation)
2. [Repository and code structure](#Repository-and-code-structure)
3. [Installation](#Installation)

## Presentation
--------------------------------------------------------------------------------

This repository contains the sources of an openPMD plugin for the visualization
 software [VisIt](https://wci.llnl.gov/simulation/computer-codes/visit).
This plugin now handles openPMD files in HDF5.
It works both in sequential and parallel.
The plugin can read Cartesian and axisymmetrical geometry (referred to
as `thetaMode` in the standard).

## Repository and code structure
--------------------------------------------------------------------------------

#### Files

This repository contains:

- The C++ source files
- An xml file `OpenPMD.xml` essential for building the plugin with VisIt tools
- The directory `docs` that contains the documentation
- The resources to generate a doxygen doc (in the directory `/Doxygen`) that describes the different classes
- This `README.md` file

Sources are composed of files generated by VisIt:

- `avtOpenPMDFileFormat.C`: class for reading and converting file format in vtk
- `OpenPMDEnginePluginInfo.C`
- `OpenPMDMDServerPluginInfo.C`
- `OpenPMDCommonPluginInfo.C`
- `OpenPMDPluginInfo.C`

And external C++ classes developed for reading openPMD files:

- `PMDFile.C`: Open, scan and print openPMD file structures
- `PMDiteration.C`: class for the iteration groups
- `PMDField.C`: class for the field groups
- `PMDParticle.C`: class for the particle groups

The `docs` directory contains:

- [CONTRIBUTING.md](./docs/CONTRIBUTING.md) with instructions on how to contribute to this plugin
- [ISSUE_TEMPLATE.md](./docs/ISSUE_TEMPLATE.md)

#### How works this plugin

VisIt plugins basically read outputs with some specific code or data formats to convert them internally into vtk readable data.

![alt text](./docs/images/class_description.png "Classes")

#### How to generate the Doxygen documentation

First, download and install [Doxygen](http://www.stack.nl/~dimitri/doxygen/download.html).

You can create the documentation by command line ([see this page for more information](https://www.stack.nl/~dimitri/doxygen/manual/doxygen_usage.html))

```
doxygen Doxygen/Doxyfile
```

You can also use the GUI frontend. Open `Doxygen/Doxyfile`, go to `Run`, click on `Run Doxygen` and finally `Show HTML output`.

## Installation
---------------------

For more information about how to generate install a plugin, please, consider the following links:

- [Getting Data Into Visit (official pdf)](https://wci.llnl.gov/content/assets/docs/simulation/computer-codes/visit/GettingDataIntoVisIt2.0.0.pdf)
- [NERSC Visit presentation and instructions](http://www.nersc.gov/users/data-analytics/data-visualization/visit-2/)

Visit contains a series of tools that makes it easy to create and generate
plugins. Without going to the details, we will use one of them (`xml2cmake`)
to install this plugin. These tools are located in the
directory `<Visit application directory>/Contents/Resources/bin/`.

You also need to install a recent version of
[cmake](https://cmake.org/download/).

You can find instructions to install and use the plugin depending on your
system in `docs/installation`:
- [Ubuntu](./docs/installation/ubuntu.md)
- [MacOs](./docs/installation/macos.md)
- [NERSC](./docs/installation/nersc.md)
